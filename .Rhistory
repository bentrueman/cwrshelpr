file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)
document()
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)
document()
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)
document()
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)
use_test("integrate_regions")
document()
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)
integrate_regions(feem) %>% slice(1:5) %>% summarize(integrated = sum(integrated))
integrate_regions(feem) %>% pivot_wider(names_from = name, values_from = integrated)
integrate_regions(feem) %>% pivot_wider(id_cols = NULL,names_from = name, values_from = integrated)
integrate_regions(feem) %>% pivot_wider(id_cols = NULL, names_from = name, values_from = integrated)
?pivot_wider
integrate_regions(feem) %>% pivot_wider(id_cols = NULL, names_from = name, values_from = integrated) %>% pivot_longer(starts_with("region"))
integrate_regions(feem) %>% pivot_wider(id_cols = NULL, names_from = name, values_from = integrated) %>% pivot_longer(starts_with("region")) %>% mutate(value / total)
integrate_regions(feem) %>% pivot_wider(id_cols = NULL, names_from = name, values_from = integrated) %>% pivot_longer(starts_with("region")) %>% mutate(frac = value / total) %>% filter(!is.na(frac))
?integrate_regions
integrate_regions(feem)$integrated
integrate_regions(feem)$integrated
test_that("integrate_regions() returns the expected values", {
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
expect_equal(
integrate_regions(feem)$integrated,
c(46.09631, 261.26285, 2687.21236, 827.17278, 14921.11398, 24146.94553)
)
})
document*
document()
check()
use_package("purrr")
check()
?rowwise
?read_feem
?integrate_regions
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)
document()
check()
document()
check()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%",
dev = "png",
dpi = 600
)
library("tidyverse")
library("cwrshelpr")
# example path to example raw data file
files <- list.files(
path = system.file("extdata", package = "cwrshelpr"), # replace this line with the path to your data
full.names = TRUE,
pattern = ".+\\.xlsx"
)
read_icp(path = files[1]) # read and clean one file
files %>%
set_names() %>%
map_dfr(read_icp, .id = "file") # read and clean multiple files
theme_set(theme_bw())
files <- list.files(
path = system.file("extdata", package = "cwrshelpr"), # replace this line with the path to your data
full.names = TRUE,
pattern = ".+\\.csv"
)
read_feem(path = files[1]) # read and clean one file
feem_dat <- files %>%
set_names() %>%
map_dfr(~ read_feem(.x, truncate = TRUE), .id = "file") # read and clean multiple files
feem_dat %>%
ggplot(aes(excitation, em_regular, fill = intensity)) +
facet_wrap(vars(file)) +
geom_raster() +
scale_fill_viridis_c()
feem_dat %>%
ggplot(aes(excitation, em_regular, z = intensity, fill = stat(level))) +
facet_wrap(vars(file)) +
stat_contour(geom = "polygon") +
scale_fill_viridis_c("intensity")
feem_dat
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup()
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(regions = map(data, integrate_regions))
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(regions = map(data, integrate_regions)) %>%
unnest(regions)
build_readme()
use_r("calculate_indices")
library(devtools)
use_r("calculate_indices")
use_test("calculate_indices")
source("~/Documents/GitHub/cwrshelpr/tests/testthat/test-calculate_indices.R", echo=TRUE)
test_that("multiplication works", {
expect_equal(2 * 2, 6)
})
library(devtools)
?read_feem
load_all()
?read_feem
document()
?calculate_indices
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
calculate_indices(read_feem(file[1]))
document()
document()
?calculate_indices
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[2])
calculate_indices(data)
?pivot_longer
document()
?pivot_longer
?calculate_indices
library(devtools)
?calculate_indices
load_all()
?calculate_indices
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
calculate_indices(data) %>% pull(value)
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
file
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
integrate_regions(feem)$integrated
file
test_that("integrate_regions() returns the expected values", {
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
feem <- read_feem(file[1], truncate = TRUE)
expect_equal(
integrate_regions(feem)$integrated,
c(46.64113, 246.98857, 2420.94329, 744.74940, 13312.19190, 21597.09472)
)
})
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
calculate_indices(data) %>% pull(value)
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[2])
calculate_indices(data)
document()
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[2])
calculate_indices(data)
ix$value
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
ix <- calculate_indices(data)
ix
data <- read_feem(file[2])
ix <- calculate_indices(data)
ix
ix$value
file <- list.files(
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.csv"
)
data <- read_feem(file[1])
calculate_indices(data)
source("~/Documents/GitHub/cwrshelpr/tests/testthat/test-calculate_indices.R", echo=TRUE)
check()
use_r("calculate_indices")
document()
check()
build_readme()
build_readme()
feemdat
files <- list.files(
path = system.file("extdata", package = "cwrshelpr"), # replace this line with the path to your data
full.names = TRUE,
pattern = ".+\\.csv"
)
read_feem(path = files[1]) # read and clean one file
feem_dat <- files %>%
set_names() %>%
map_dfr(~ read_feem(.x, truncate = TRUE), .id = "file") # read and clean multiple files
feemdat
feem_dat <- files %>%
set_names() %>%
map_dfr(~ read_feem(.x, truncate = TRUE), .id = "file") # read and clean multiple files
feemdat
feem_dat
?calculate_indices
mutate(ix = map(data, calculate_indices)
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(ix = map(data, calculate_indices))
library(tidyverse)
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(ix = map(data, calculate_indices))
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(ix = map(data, calculate_indices)) %>%
unnest(ix)
build_readme()
test::install_github("bentrueman/cwrshelpr")
build_readme()
library(devtools)
build_readme()
library("tidyverrse")
build_readme()
install.packages("edwards97")
build_readme()
library(devtools)
build_readme()
library*devtools
library(devtools)
build_readme()
library(devtools)
check()
test_coverage()
use_github_action_check_release()
use_coverage()
use_github_action("test-coverage")
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%",
dev = "png",
dpi = 600
)
library("tidyverse")
library("cwrshelpr")
# example path to example raw data file
files <- list.files(
# replace this line with the path to your data:
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.xlsx"
)
read_icp(path = files[1]) # read and clean one file
files %>%
set_names() %>%
map_dfr(read_icp, .id = "file") # read and clean multiple files
theme_set(theme_bw())
files <- list.files(
path = system.file("extdata", package = "cwrshelpr"), # replace this line with the path to your data
full.names = TRUE,
pattern = ".+\\.csv"
)
read_feem(path = files[1]) # read and clean one file
feem_dat <- files %>%
set_names() %>%
map_dfr(~ read_feem(.x, truncate = TRUE), .id = "file") # read and clean multiple files
feem_dat %>%
ggplot(aes(excitation, em_regular, fill = intensity)) +
facet_wrap(vars(file)) +
geom_raster() +
scale_fill_viridis_c()
feem_dat %>%
ggplot(aes(excitation, em_regular, z = intensity, fill = stat(level))) +
facet_wrap(vars(file)) +
stat_contour(geom = "polygon") +
scale_fill_viridis_c("intensity")
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(regions = map(data, integrate_regions)) %>%
unnest(regions)
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(ix = map(data, calculate_indices)) %>%
unnest(ix)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%",
dev = "png",
dpi = 600
)
library("tidyverse")
library("cwrshelpr")
# example path to example raw data file
files <- list.files(
# replace this line with the path to your data:
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.xlsx"
)
read_icp(path = files[1]) # read and clean one file
files %>%
set_names() %>%
map_dfr(read_icp, .id = "file") # read and clean multiple files
theme_set(theme_bw())
files <- list.files(
path = system.file("extdata", package = "cwrshelpr"), # replace this line with the path to your data
full.names = TRUE,
pattern = ".+\\.csv"
)
read_feem(path = files[1]) # read and clean one file
feem_dat <- files %>%
set_names() %>%
map_dfr(~ read_feem(.x, truncate = TRUE), .id = "file") # read and clean multiple files
feem_dat %>%
ggplot(aes(excitation, em_regular, fill = intensity)) +
facet_wrap(vars(file)) +
geom_raster() +
scale_fill_viridis_c()
feem_dat %>%
ggplot(aes(excitation, em_regular, z = intensity, fill = stat(level))) +
facet_wrap(vars(file)) +
stat_contour(geom = "polygon") +
scale_fill_viridis_c("intensity")
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(regions = map(data, integrate_regions)) %>%
unnest(regions)
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(ix = map(data, calculate_indices)) %>%
unnest(ix)
library("cwrshelpr")
calculate_indices()
?calculate_indices()
?read_icp
document()
library(devtools)
document()
?calculate_indices
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%",
dev = "png",
dpi = 600
)
library("tidyverse")
library("cwrshelpr")
# example path to example raw data file
files <- list.files(
# replace this line with the path to your data:
path = system.file("extdata", package = "cwrshelpr"),
full.names = TRUE,
pattern = ".+\\.xlsx"
)
read_icp(path = files[1]) # read and clean one file
files %>%
set_names() %>%
map_dfr(read_icp, .id = "file") # read and clean multiple files
theme_set(theme_bw())
files <- list.files(
path = system.file("extdata", package = "cwrshelpr"), # replace this line with the path to your data
full.names = TRUE,
pattern = ".+\\.csv"
)
read_feem(path = files[1]) # read and clean one file
feem_dat <- files %>%
set_names() %>%
map_dfr(~ read_feem(.x, truncate = TRUE), .id = "file") # read and clean multiple files
feem_dat %>%
ggplot(aes(excitation, em_regular, fill = intensity)) +
facet_wrap(vars(file)) +
geom_raster() +
scale_fill_viridis_c()
feem_dat %>%
ggplot(aes(excitation, em_regular, z = intensity, fill = stat(level))) +
facet_wrap(vars(file)) +
stat_contour(geom = "polygon") +
scale_fill_viridis_c("intensity")
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(regions = map(data, integrate_regions)) %>%
unnest(regions)
feem_dat %>%
group_by(file) %>%
nest() %>%
ungroup() %>%
mutate(ix = map(data, calculate_indices)) %>%
unnest(ix)
remotes::install_github("bentrueman/cwrshelpr")
